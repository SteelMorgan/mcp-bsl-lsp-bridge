# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ñ–æ—Ä–º–∞—Ç–∞–º –ø—É—Ç–µ–π –¥–ª—è MCP-LSP Bridge –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

## üÜï –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ–π (Docker Path Mapper)

**–ù–û–í–û–ï**: MCP-LSP Bridge —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø—É—Ç–∏ –º–µ–∂–¥—É —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–æ–π –∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º!

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞**: Bridge –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç Docker —Ä–µ–∂–∏–º
2. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –ø—É—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –∏–∑ —Ö–æ—Å—Ç-—Ñ–æ—Ä–º–∞—Ç–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-—Ñ–æ—Ä–º–∞—Ç
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø—É—Ç–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `HOST_PROJECTS_ROOT` - –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –Ω–∞ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `D:\My Projects\Projects 1C`)
- `PROJECTS_ROOT` - –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `/projects`)

### –ü—Ä–∏–º–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

```json
// –í—Ö–æ–¥–Ω–æ–π –∑–∞–ø—Ä–æ—Å (—Ö–æ—Å—Ç-–ø—É—Ç—å)
{
  "workspace_uri": "D:\\My Projects\\Projects 1C\\temp",
  "query": "D:\\My Projects\\Projects 1C\\temp\\file.bsl"
}

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–ø—É—Ç—å)
{
  "workspace_uri": "/projects/temp",
  "query": "/projects/temp/file.bsl"
}
```

## üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø—É—Ç–µ–π

### ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã

#### 1. –¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å)
```json
{
  "analysis_type": "workspace_analysis",
  "query": ".",
  "workspace_uri": "."
}
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚ùå –ù–ï —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã (–¥–ª—è Windows –ø—É—Ç–µ–π —Å –ø—Ä–æ–±–µ–ª–∞–º–∏)

#### 1. –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥—É
```json
{
  "workspace_uri": "test-workspace"
}
```
**–û—à–∏–±–∫–∞**: `project directory does not exist: test-workspace`

#### 2. –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å —Å ./
```json
{
  "workspace_uri": "./test-workspace"
}
```
**–û—à–∏–±–∫–∞**: `project directory does not exist: ./test-workspace`

#### 3. –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å Windows (–æ–±—Ä–∞—Ç–Ω—ã–µ —Å–ª—ç—à–∏)
```json
{
  "workspace_uri": "D:\\My Projects\\FrameWork 1C\\mcp-lsp-bridge\\test-workspace"
}
```
**–û—à–∏–±–∫–∞**: `project directory does not exist: D:\My Projects\FrameWork 1C\mcp-lsp-bridge\test-workspace`

#### 4. –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å Unix (–ø—Ä—è–º—ã–µ —Å–ª—ç—à–∏)
```json
{
  "workspace_uri": "D:/My Projects/FrameWork 1C/mcp-lsp-bridge/test-workspace"
}
```
**–û—à–∏–±–∫–∞**: `project directory does not exist: D:/My Projects/FrameWork 1C/mcp-lsp-bridge/test-workspace`

#### 5. File URI —Å —Ç—Ä–µ–º—è —Å–ª—ç—à–∞–º–∏
```json
{
  "workspace_uri": "file:///D:/My Projects/FrameWork 1C/mcp-lsp-bridge/test-workspace"
}
```
**–û—à–∏–±–∫–∞**: `project directory does not exist: /D:/My Projects/FrameWork 1C/mcp-lsp-bridge/test-workspace`

#### 6. File URI —Å URL-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ–±–µ–ª–æ–≤
```json
{
  "workspace_uri": "file:///D:/My%20Projects/FrameWork%201C/mcp-lsp-bridge/test-workspace"
}
```
**–û—à–∏–±–∫–∞**: `project directory does not exist: /D:/My%20Projects/FrameWork%201C/mcp-lsp-bridge/test-workspace`

## üê≥ –†–∞–±–æ—Ç–∞—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Docker

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–æ–º–æ–≤

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
# –ú–æ–Ω—Ç–∏—Ä—É–µ–º –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–æ–≤
docker run --rm -i \
  -v "D:\My Projects\Projects 1C:/projects:ro" \
  mcp-lsp-bridge-bsl-universal \
  mcp-lsp-bridge
```

### –§–æ—Ä–º–∞—Ç –ø—É—Ç–µ–π –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

#### ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Docker
```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/call",
  "params": {
    "name": "project_analysis",
    "arguments": {
      "analysis_type": "workspace_analysis",
      "query": "/projects/temp",
      "workspace_uri": "file:///projects/temp"
    }
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ–º —è–∑—ã–∫–∞ BSL

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Docker —Ä–µ—à–µ–Ω–∏—è

1. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø**: –û–¥–∏–Ω —Ä–∞–∑ –º–æ–Ω—Ç–∏—Ä—É–µ–º –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–æ–≤
2. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –ø—É—Ç–∏**: –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—É—Ç–∏ (Unix-—Å—Ç–∏–ª—å)
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Read-only –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
4. **–ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å**: –û–¥–∏–Ω–∞–∫–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –û–°

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ MCP —Å–µ—Ä–≤–µ—Ä–∞

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –õ–æ–∫–∞–ª—å–Ω—ã–π MCP —Å–µ—Ä–≤–µ—Ä –Ω–∞ Windows –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Ç—è–º–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º–∏ –ø—Ä–æ–±–µ–ª—ã.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:
```json
{
  "workspace_uri": "."
}
```

### –î–ª—è Docker MCP —Å–µ—Ä–≤–µ—Ä–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É—Ç–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ Unix —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "workspace_uri": "file:///projects/<–∏–º—è_–ø—Ä–æ–µ–∫—Ç–∞>"
}
```

**–ü—Ä–∏–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
```bash
echo '{"jsonrpc":"2.0","id":1,"method":"tools/call","params":{"name":"project_analysis","arguments":{"analysis_type":"workspace_analysis","query":"/projects/temp","workspace_uri":"file:///projects/temp"}}}' | docker run --rm -i -v "D:\My Projects\Projects 1C:/projects:ro" mcp-lsp-bridge-bsl-universal mcp-lsp-bridge
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Docker

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ `mcp_config.docker.test.json`:

```json
{
  "mcpServers": {
    "lsp-bsl-bridge": {
      "type": "stdio",
      "command": "docker",
      "args": [
        "exec",
        "-i",
        "mcp-lsp-bridge-universal",
        "mcp-lsp-bridge"
      ],
      "env": {
        "WORKSPACE_ROOT": "/projects",
        "PROJECTS_ROOT": "/projects",
        "HOST_PROJECTS_ROOT": "D:\\My Projects\\Projects 1C"
      }
    }
  }
}
```

### –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–º–æ–≤

```bash
-v "D:\My Projects\Projects 1C:/projects:ro"
-v "D:\My Projects\Projects 1C:/workspace:ro"
-v "D:\My Projects\Projects 1C:/home/user/projects:ro"
```

## üéØ –í—ã–≤–æ–¥—ã

1. **–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ –Ω–∞ Windows –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**
2. **–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Unix-—Å—Ç–∏–ª—å –ø—É—Ç–∏**: `/projects/<–ø—É—Ç—å>`
3. **–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ MCP —Å–µ—Ä–≤–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é**: `.`
4. **–§–æ—Ä–º–∞—Ç URI –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**: `file:///projects/<–ø—É—Ç—å>`

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Path Mapper

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Docker

```bash
# –í Dockerfile.universal
ENV HOST_PROJECTS_ROOT=""
ENV PROJECTS_ROOT="/projects"

# –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
-e "HOST_PROJECTS_ROOT=D:\My Projects\Projects 1C"
-e "PROJECTS_ROOT=/projects"
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞

- **Docker —Ä–µ–∂–∏–º**: –ï—Å–ª–∏ `HOST_PROJECTS_ROOT` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ–π
- **–õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º**: –ï—Å–ª–∏ `HOST_PROJECTS_ROOT` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ ‚Üí —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

Bridge –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:
```
INFO: Docker path mapping enabled: D:\My Projects\Projects 1C -> /projects
WARN: Path mapper initialization failed, using local mode: ...
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [DOCKER_SETUP_REPORT.md](DOCKER_SETUP_REPORT.md) - –û—Ç—á–µ—Ç –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- [DOCKER_UNIVERSAL_SETUP.md](DOCKER_UNIVERSAL_SETUP.md) - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Docker
- [mcp_config.docker.test.json](mcp_config.docker.test.json) - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Docker
